<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Youtube-descargas</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
</head>
<body style="background: #a70000;  /* fallback for old browsers */background: -webkit-linear-gradient(to right, #FFFDE4, #a72100);  /* Chrome 10-25, Safari 5.1-6 */background: linear-gradient(to right, #FFFDE4, #a70000); /* W3C, IE 10+/ Edge, Firefox 16+, Chrome 26+, Opera 12+, Safari 7+ */">
    <div class="container my-4 col">
   
    
    <div class="mt-3 mb-3">
        <iframe width="560" height="315" 
            src="https://www.youtube.com/embed/{{ videoId }}" 
            frameborder="0" 
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
            allowfullscreen></iframe>
    </div>
    <div id="cargando" style="display: none" class="alert alert-success" role="alert">
        su video se esta procesando, espere un momento
      </div>
    <div>
        <nav>
            <b>Formato videos</b><br> 
            <button class="btn btn-warning mt-3 mb-3" type="button" onclick="descargar_1080p()" style="border-radius: 40px;">
                <b>Descargar 1080p</b> 
             </button>

             <button class="btn btn-warning mt-3 mb-3" type="button" onclick="descargar_720p()" style="border-radius: 40px;">
                <b>Descargar 720p</b> 
             </button>

             <button class="btn btn-warning mt-3 mb-3" type="button" onclick="descargar_480p()" style="border-radius: 40px;">
                <b>Descargar 480p</b> 
             </button>

             <button class="btn btn-warning mt-3 mb-3" type="button" onclick="descargar_360p()" style="border-radius: 40px;">
                <b>Descargar 360p</b> 
             </button>

             <button class="btn btn-warning mt-3 mb-3" type="button" onclick="descargar_240p()" style="border-radius: 40px;">
                <b>Descargar 240p</b> 
             </button>

             <button class="btn btn-warning mt-3 mb-3" type="button" onclick="descargar_144p()" style="border-radius: 40px;">
                <b>Descargar 144p</b> 
             </button>



        </nav>
        <nav>
            <b>Formato audio</b><br>
            <button class="btn btn-success mt-3 mb-3" type="button" onclick="descargar_mp3()" style="border-radius: 40px;">
                <b>Descargar mp3</b> 
            </button>
        </nav>  
</div>


    <script>
        const cargando = document.getElementById('cargando')

        function descargar_1080p() {
            cargando.style.display = 'block';

            fetch('http://localhost:5000/descargar_1080p?url={{ url }}')
                .then(res => res.json())
                .then(response => {
                    cargando.style.display = 'none';
                    const link = document.createElement("a");
                    link.download = 'video';
                    link.href = response.url;
                    link.click();
                })
        }
        function descargar_720p() {
            cargando.style.display = 'block';

            fetch('http://localhost:5000/descargar_720p?url={{ url }}')
                .then(res => res.json())
                .then(response => {
                    cargando.style.display = 'none';
                    const link = document.createElement("a");
                    link.download = 'video';
                    link.href = response.url;
                    link.click();
                })
        }
        function descargar_480p() {
            cargando.style.display = 'block';

            fetch('http://localhost:5000/descargar_480p?url={{ url }}')
                .then(res => res.json())
                .then(response => {
                    cargando.style.display = 'none';
                    const link = document.createElement("a");
                    link.download = 'video';
                    link.href = response.url;
                    link.click();
                })
        }
        function descargar_240p() {
            cargando.style.display = 'block';

            fetch('http://localhost:5000/descargar_240p?url={{ url }}')
                .then(res => res.json())
                .then(response => {
                    cargando.style.display = 'none';
                    const link = document.createElement("a");
                    link.download = 'video';
                    link.href = response.url;
                    link.click();
                })
        }
        function descargar_144p() {
            cargando.style.display = 'block';

            fetch('http://localhost:5000/descargar_144p?url={{ url }}')
                .then(res => res.json())
                .then(response => {
                    cargando.style.display = 'none';
                    const link = document.createElement("a");
                    link.download = 'video';
                    link.href = response.url;
                    link.click();
                })
        }
        function descargar_mp3() {
            cargando.style.display = 'block';

            fetch('http://localhost:5000/descargar-mp3?url={{ url }}')
                .then(res => res.json())
                .then(response => {
                    cargando.style.display = 'none';
                    const link = document.createElement("a");
                    link.download = 'video';
                    link.href = response.url;
                    link.click();
                })
        }


    </script>
    </div>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
</body>
</html>